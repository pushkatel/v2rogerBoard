# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Commands

- `npm run dev` — Start Vite dev server with HMR
- `npm run build` — Type-check with `tsc -b` then build with Vite
- `npm run lint` — Run ESLint across the project
- `npm run knip` — Find unused imports, exports, and dependencies
- `npm run preview` — Preview the production build locally

## Architecture

React 19 + TypeScript app scaffolded with Vite 7.

- **Entry point**: `index.html` loads `src/main.tsx`, which creates a TanStack Router and renders `<RouterProvider />` into `#root` with StrictMode
- **Routing**: TanStack Router with file-based route generation (`@tanstack/router-plugin/vite`). Route files live in `src/routes/` and are thin wrappers (import + `createFileRoute`). The route tree is auto-generated into `src/routeTree.gen.ts` — do not edit this file manually.
  - `src/routes/__root.tsx` — Root layout with MantineProvider + AppShell + nav
  - `src/routes/index.tsx` — Dashboard (`/`)
  - `src/routes/tickets.tsx` — Tickets (`/tickets`)
  - `src/routes/equipment.tsx` — Equipment (`/equipment`)
  - `src/routes/admin.tsx` — Admin / employee management (`/admin`)
- **Page components**: Live in `src/components/pages/<page>/`, one folder per page. Route files import and re-export these.
- **Shared components**: Live in `src/components/shared/` (e.g. `DataTable`).
- **UI Library**: Mantine v7 (`@mantine/core`, `@mantine/hooks`, `@mantine/form`). Styles loaded via `@mantine/core/styles.css` in `main.tsx`. PostCSS config in `postcss.config.cjs`.
- **Source code**: All app code lives in `src/`
- **Static assets**: `public/` for files served as-is; `src/assets/` for imported assets
- **Build output**: `dist/` (gitignored)

## TypeScript

- Strict mode enabled with `noUnusedLocals` and `noUnusedParameters`
- Two tsconfig project references: `tsconfig.app.json` (src code) and `tsconfig.node.json` (tooling config)
- Target: ES2022, JSX transform: `react-jsx`

## Conventions

- React components are written as **arrow functions** (`const Foo = () => { ... }`), not `function` declarations.
- Page components live in `src/components/pages/<page>/`, not inline in route files. Route files should only contain the import and `createFileRoute` export.
- **Commit messages** use [Conventional Commits](https://www.conventionalcommits.org/) format: `type: description`
  - `feat` — new feature
  - `fix` — bug fix
  - `style` — formatting, whitespace, missing semicolons (no code change)
  - `refactor` — code restructuring without behavior change
  - `docs` — documentation only
  - `chore` — tooling, deps, config, build (no app code change)
  - `test` — adding or updating tests

## Linting & Code Quality

ESLint 9 flat config (`eslint.config.js`) with:
- `typescript-eslint` recommended rules
- `eslint-plugin-react-hooks` (recommended)
- `eslint-plugin-react-refresh` (Vite)
- `eslint-plugin-simple-import-sort` — auto-sorts imports/exports
- Only lints `**/*.{ts,tsx}` files; `dist/` is ignored

**Knip** (`npm run knip`) detects unused imports, exports, and dependencies. Config in `package.json` under `"knip"`.

## Pre-commit Hooks

Husky + lint-staged run automatically on every commit:
1. **lint-staged**: runs `eslint --fix` on staged `*.{ts,tsx}` files (sorts imports, fixes lint errors)
2. **knip**: checks the full project for unused imports, exports, and dependencies

If either check fails, the commit is blocked.
